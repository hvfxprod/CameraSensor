<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera Sensor Database</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 20px;
        }
        h2 {
            color: #333;
        }
        select {
            padding: 10px;
            margin: 10px;
            font-size: 16px;
        }
        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
            background: #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: center;
        }
        th {
            background-color: #007BFF;
            color: white;
        }
    </style>
</head>
<body>
    <h2>Camera Sensor Database</h2>
    <label for="manufacturer">Select Manufacturer:</label>
    <select id="manufacturer" onchange="updateModels()">
        <option value="">-- Select Manufacturer --</option>
    </select>
    
    <label for="model">Select Camera Model:</label>
    <select id="model" onchange="displaySensorInfo()">
        <option value="">-- Select Model --</option>
    </select>
    
    <h3>Sensor Information</h3>
    <table id="sensor-info">
        <tr>
            <th>Resolution Width</th>
            <th>Resolution Height</th>
            <th>Sensor mm Width</th>
            <th>Sensor mm Height</th>
            <th>Sensor mm Diagonal</th>
            <th>Sensor Inches Width</th>
            <th>Sensor Inches Height</th>
            <th>Sensor Inches Diagonal</th>
        </tr>
        <tr id="sensor-data">
            <td colspan="8">Select a camera to view details</td>
        </tr>
    </table>
    
    <script>
        let cameraData = [];  // JSON 데이터를 저장할 배열
    
        async function fetchCameraData() {
            try {
                const response = await fetch("https://raw.githubusercontent.com/hvfxprod/CameraSensor/main/sensors.json");  
                if (!response.ok) throw new Error("Failed to fetch data");
    
                cameraData = await response.json();  // JSON 데이터 저장
                console.log("Fetched Camera Data:", cameraData); // 데이터 확인용
    
                if (!Array.isArray(cameraData)) {
                    throw new Error("Invalid data format: Expected an array");
                }
    
                populateManufacturers();
            } catch (error) {
                console.error("Error fetching camera data:", error);
            }
        }
    
        function populateManufacturers() {
            const manufacturerSelect = document.getElementById("manufacturer");
            manufacturerSelect.innerHTML = '<option value="">-- Select Manufacturer --</option>';
    
            if (cameraData.length === 0) {
                console.error("No camera data available");
                return;
            }
    
            const manufacturers = [...new Set(cameraData.map(camera => camera["Manufacturer"]))];
            
            console.log("Manufacturers List:", manufacturers); // 제조사 목록 확인
    
            manufacturers.forEach(manufacturer => {
                let option = document.createElement("option");
                option.value = manufacturer;
                option.textContent = manufacturer;
                manufacturerSelect.appendChild(option);
            });
        }
    
        fetchCameraData();
    </script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera Sensor Database</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            padding: 20px;
        }
        h2 {
            color: #333;
        }
        select {
            padding: 10px;
            margin: 10px;
            font-size: 16px;
        }
        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
            background: #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        th, td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: center;
        }
        th {
            background-color: #007BFF;
            color: white;
        }
    </style>
</head>
<body>
    <h2>Camera Sensor Database</h2>
    <label for="manufacturer">Select Manufacturer:</label>
    <select id="manufacturer" onchange="updateModels()">
        <option value="">-- Select Manufacturer --</option>
    </select>
    
    <label for="model">Select Camera Model:</label>
    <select id="model" onchange="displaySensorInfo()">
        <option value="">-- Select Model --</option>
    </select>
    
    <h3>Sensor Information</h3>
    <table id="sensor-info">
        <tr>
            <th>Resolution Width</th>
            <th>Resolution Height</th>
            <th>Sensor mm Width</th>
            <th>Sensor mm Height</th>
            <th>Sensor mm Diagonal</th>
            <th>Sensor Inches Width</th>
            <th>Sensor Inches Height</th>
            <th>Sensor Inches Diagonal</th>
        </tr>
        <tr id="sensor-data">
            <td colspan="8">Select a camera to view details</td>
        </tr>
    </table>
    
    <script>
        const proxyUrl = "https://cors-anywhere.herokuapp.com/"; 
        const rawJsonUrl = "https://raw.githubusercontent.com/hvfxprod/CameraSensor/refs/heads/main/sensors.json";
    
        fetch(proxyUrl + rawJsonUrl)
            .then(response => response.json())
            .then(data => {
                initializeCameraData(data);
            })
            .catch(error => console.error("Error fetching data:", error));
    
        function initializeCameraData(cameraData) {
            const manufacturerSelect = document.getElementById("manufacturer");
            manufacturerSelect.innerHTML = '<option value="">-- Select Manufacturer --</option>';
            const manufacturers = [...new Set(cameraData.map(camera => camera["Manufacturer"]))];
    
            manufacturers.forEach(manufacturer => {
                let option = document.createElement("option");
                option.value = manufacturer;
                option.textContent = manufacturer;
                manufacturerSelect.appendChild(option);
            });
    
            window.cameraData = cameraData; // 전역 변수로 저장
        }
    
        function updateModels() {
            const selectedManufacturer = document.getElementById("manufacturer").value;
            const modelSelect = document.getElementById("model");
            modelSelect.innerHTML = '<option value="">-- Select Model --</option>';
            
            if (!selectedManufacturer || !window.cameraData) return;
    
            const models = window.cameraData
                .filter(camera => camera["Manufacturer"] === selectedManufacturer)
                .map(camera => camera["Model"]);
    
            models.forEach(model => {
                let option = document.createElement("option");
                option.value = model;
                option.textContent = model;
                modelSelect.appendChild(option);
            });
        }
    
        function displaySensorInfo() {
            const selectedModel = document.getElementById("model").value;
            const sensorRow = document.getElementById("sensor-data");
    
            if (!selectedModel || !window.cameraData) {
                sensorRow.innerHTML = '<td colspan="8">Select a camera to view details</td>';
                return;
            }
    
            const selectedCamera = window.cameraData.find(camera => camera["Model"] === selectedModel);
    
            sensorRow.innerHTML = `
                <td>${selectedCamera["Resolution Width"]}</td>
                <td>${selectedCamera["Resolution Height"]}</td>
                <td>${selectedCamera["Sensor mm Width"]}</td>
                <td>${selectedCamera["Sensor mm Height"]}</td>
                <td>${selectedCamera["Sensor mm Diagonal"]}</td>
                <td>${selectedCamera["Sensor Inches Width"]}</td>
                <td>${selectedCamera["Sensor Inches Height"]}</td>
                <td>${selectedCamera["Sensor Inches Diagonal"]}</td>
            `;
        }
    </script>

</body>
</html>
